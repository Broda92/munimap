<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <link href="ics.css" media="all" rel="stylesheet" type="text/css" />
    
    <link href="../../plovr/plovr.css" media="all" rel="stylesheet" type="text/css" />
    
    <script src="../../ics/map/lib/lib.plovr.json" type="text/javascript"></script>
    <script src="../../_lib/prettyprint/index.js" type="text/javascript"></script>

    <title>munimap - vlastní popisky budov</title>
  </head>
  <body>
    <div class="content">
      <div id="map" class="map">
      </div>
      <div class="example">
        <h3 id="title">munimap - vlastní popisky budov</h3>
        <p>
          Pokročilejší uživatelé si mohou například předefinovat popisky budov.
          Toho lze dosáhnout předáním vlastní funkce, která vrací popisky,
          do parametru <code>markerLabel</code> metody <code>ics.map.create</code>.
        </p>
        <pre class="prettyprint">
&lt;script type="text/javascript"&gt;
  /**
   * @param {ol.Feature|ol.render.Feature} feature
   * @param {number} resolution
   * @return {string|null|undefined}
   */
  var getHeadquartersLabels = function(feature, resolution) {
    var headquatersCount = 10;
    var title;
    if (feature.get('features')) {
      var clusteredFeatures = feature.get('features');
      if (clusteredFeatures.length === headquatersCount) {
        title = 'MU';
      } else if (clusteredFeatures.length === 1) {
        title = getHeadquartersBuildingLabels(
            clusteredFeatures[0], resolution);
      } else {
        var titleParts = clusteredFeatures.map(function(cf) {
          return getHeadquartersLabels(cf, resolution);
        });
        title = ics.map.style.alignTextToRows(titleParts, ', ');
      }
    } else {
      title =
          getHeadquartersBuildingLabels(feature, resolution);
    }
    return title;
  };


  /**
   *
   * @param {ol.Feature|ol.render.Feature} feature
   * @param {number} resolution
   * @return {string|null|undefined}
   */
  var getHeadquartersBuildingLabels =
      function(feature, resolution) {
    var title;
    var locCode = /**@type (string)*/ (feature.get('polohKod'));
    var showShortcuts = resolution > 2.4;
    switch (locCode) {
      case 'BMA01':
        title = showShortcuts ? 'RMU' : 'Rektorát MU';
        break;
      case 'BVC01':
        title = showShortcuts ? 'PrF' : 'Právnická\nfakulta';
        break;
      case 'BHA18':
        title = showShortcuts ? 'LF' : 'Lékařská\nfakulta';
        break;
      case 'BVB01':
        title = showShortcuts ? 'PřF' : 'Přírodovědecká\nfakulta';
        break;
      case 'BVA04':
        title = showShortcuts ? 'FF' : 'Filozofická\nfakulta';
        break;
      case 'BBA01':
        title = showShortcuts ? 'PdF' : 'Pedagogická\nfakulta';
        break;
      case 'BPA11':
        title = showShortcuts ? 'ESF' : 'Ekonomicko-správní\nfakulta';
        break;
      case 'BNA01':
        title = showShortcuts ? 'FI' : 'Fakulta\ninformatiky';
        break;
      case 'BMB02':
        title = showShortcuts ? 'FSS' : 'Fakulta\nsociálních studií';
        break;
      case 'BHA35':
        title = showShortcuts ? 'FSpS' : 'Fakulta\nsportovních studií';
        break;
      default:
        title = null;
    }
    return title;
  };

  ics.map.create({
    target: 'map',
    markers: ['BMA01', 'BVC01', 'BHA18', 'BVB01', 'BVA04', 'BBA01', 'BPA11',
      'BNA01', 'BMB02', 'BHA35'],
    markerLabel: getHeadquartersLabels
  });
&lt;/script&gt;
        </pre>
      </div>
      <div class="footer">
        <ul>
          <li><a href="helloworld.html">vložení mapy</a></li>
          <li><a href="building.html">zvýraznění budovy</a></li>
          <li><a href="room.html">zvýraznění místnosti</a></li>
          <li><a href='language.html'>změna jazyka</a></li>
          <li>vlastní popisky</li>
          <li><a href='reset.html'>reset mapy</a></li>
          <li><a href='multiple.html'>více map</a></li>
        </ul>
      </div>
    </div>
    <script type="text/javascript">
      /**
       * @param {ol.Feature|ol.render.Feature} feature
       * @param {number} resolution
       * @return {string|null|undefined}
       */
      var getHeadquartersLabels = function(feature, resolution) {
        var headquatersCount = 10;
        var title;
        if (feature.get('features')) {
          var clusteredFeatures = feature.get('features');
          if (clusteredFeatures.length === headquatersCount) {
            title = 'MU';
          } else if (clusteredFeatures.length === 1) {
            title = getHeadquartersBuildingLabels(
                clusteredFeatures[0], resolution);
          } else {
            var titleParts = clusteredFeatures.map(function(cf) {
              return getHeadquartersLabels(cf, resolution);
            });
            title = ics.map.style.alignTextToRows(titleParts, ', ');
          }
        } else {
          title =
              getHeadquartersBuildingLabels(feature, resolution);
        }
        return title;
      };


      /**
       *
       * @param {ol.Feature|ol.render.Feature} feature
       * @param {number} resolution
       * @return {string|null|undefined}
       */
      var getHeadquartersBuildingLabels =
          function(feature, resolution) {
        var title;
        var locCode = /**@type (string)*/ (feature.get('polohKod'));
        var showShortcuts = resolution > 2.4;
        switch (locCode) {
          case 'BMA01':
            title = showShortcuts ? 'RMU' : 'Rektorát MU';
            break;
          case 'BVC01':
            title = showShortcuts ? 'PrF' : 'Právnická\nfakulta';
            break;
          case 'BHA18':
            title = showShortcuts ? 'LF' : 'Lékařská\nfakulta';
            break;
          case 'BVB01':
            title = showShortcuts ? 'PřF' : 'Přírodovědecká\nfakulta';
            break;
          case 'BVA04':
            title = showShortcuts ? 'FF' : 'Filozofická\nfakulta';
            break;
          case 'BBA01':
            title = showShortcuts ? 'PdF' : 'Pedagogická\nfakulta';
            break;
          case 'BPA11':
            title = showShortcuts ? 'ESF' : 'Ekonomicko-správní\nfakulta';
            break;
          case 'BNA01':
            title = showShortcuts ? 'FI' : 'Fakulta\ninformatiky';
            break;
          case 'BMB02':
            title = showShortcuts ? 'FSS' : 'Fakulta\nsociálních studií';
            break;
          case 'BHA35':
            title = showShortcuts ? 'FSpS' : 'Fakulta\nsportovních studií';
            break;
          default:
            title = null;
        }
        return title;
      };

      ics.map.create({
        target: 'map',
        markers: ['BMA01', 'BVC01', 'BHA18', 'BVB01', 'BVA04', 'BBA01', 'BPA11',
          'BNA01', 'BMB02', 'BHA35'],
        markerLabel: getHeadquartersLabels
      });
    </script>
  </body>
</html>
